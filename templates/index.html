<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>SpeakSign</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <link rel='stylesheet' type='text/css' media='screen' href="{{url_for('static',filename='./style.css')}}">
        <meta http-equiv="Access-Control-Allow-Methods" content="GET">
        <link rel="stylesheet" href="{{url_for('static',filename='css/cwasa.css')}}">
        <script src="js/ie-emulation-modes-warning.js"></script>
        <script type="text/javascript" src="{{url_for('static',filename='js/allcsa.js')}}"></script>
        <script language="javascript">
            // Initial configuration
            var initCfg = {
                "avsbsl" : ["luna", "siggi", "anna", "marc", "francoise"],
                "avSettings" : { "avList": "avsbsl", "initAv": "marc" }
            };
            // global variable to store the sigmal list
            var sigmlList = null;
            // global variable to tell if avatar is ready or not
            var tuavatarLoaded = false;
            var playerAvailableToPlay = true;
        </script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body onload="CWASA.init(initCfg);">
        <script language="javascript">

        function playText(stext) {
            CWASA.playSiGMLText(stext);
        }

        // sets url for sigml
        function setSiGMLURL(sigmlURL) {
            console.log("hello");
            var loc = window.location.href;
            var locDir = loc.substring(0, loc.lastIndexOf('/'));
            sigmlURL = locDir + "/" + sigmlURL;
            console.log("URL "+sigmlURL);
            document.getElementById("URLText").value = sigmlURL;
            return sigmlURL;
        }
        // starts the player animation
        function startPlayer(sigmlURL) {
            sigmlURL = setSiGMLURL(sigmlURL);
            console.log("URL "+sigmlURL);
            // Equivalent to click on Sign button
            CWASA.getLogger("myLog","warn");
            CWASA.playSiGMLURL(sigmlURL);
            CWASA.getLogger("myLog","warn");
        }
        </script>
        <!-- <div class="main"> -->
            <div class="split-screen"></div>
                <div class="left-column">
                    <div class="center-container">
                        <div class="container">
                            <h4>Enter the text of your local language</h4>
                            <h4>and press volume icon to play the text in English</h4><br>
                
                            <!-- Add an input textbox for entering text -->
                            <input type="text" id="inputText" placeholder="Enter text"><br>
                
                            <!-- Add a button to convert entered text to speech -->
                            <button id="convertToSpeech" style="background: transparent; border: none;">
                                <i class="fa fa-volume-up" style="font-size:48px"></i>
                            </button><br>
                
                            <!-- Display the translated text and converted speech text -->
                            <div>Converted Speech Text: <span id="convertedSpeechText"></span></div>
                        </div>
                    </div>
                </div>
                <div class="right-column">
                    <div class="center-container">
                        <div class="container">
                        <!-- animation player frame -->
                        <div class="player card" >
                            <a id="player"></a>
                            <div class="anim"> 
                                <div style="box-sizing: border-box; width: 100%; height: 100%; padding: 15px;" >
                                    <table align="center" style="width:100%; height:100%;" >
                                        <tr align="center">
                                        
                                        <!--================================================================-->
                                        <!-- CWA signing avatar panel 0 -->
                                        <!--================================================================-->
                                        <!-- Replaced by an avatar panel -->
                                        <!--================================================================-->
                                            <td width="100%" height="100%" >
                                                <div class="CWASAAvatar av0" align="center" ></div>
                                            </td>
                                        <!--================================================================-->
                                        </tr>
                                        <tr>
                                        <!--  CachedSiGML URL  -->
                                        <input type="text" id="URLText" class="txtSiGMLURL av0 undisplayed" value="" />
                                            <script language="javascript">
                                            // Set default sign
                                            setSiGMLURL("SignFiles/B.sigml");
                                            </script>
                                        </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div><br>
                        <div class="container">
                            <div class="row">
                                <!-- Left Column: Speech Recognizer -->
                                <div class="col-md-6 left-column1">
                                    <div class="content text-center">
                                        <div id="speech_recognizer">
                                            <a onclick="startDictation()" class="waves-effect">
                                                <i class="fa fa-microphone" style="font-size:36px"></i>
                                            </a>
                                            <strong><p class="text-center">Click to Speak</p></strong>
                                        </div>
                                        <div id="speech">
                                            <strong><span id="speech_text">Text</span></strong>
                                            <div><span id="speech_"></span></div>
                                        </div><br>
                                        <strong><span id="isl_text">Indian Sign Language</span></strong>
                                        <div id="isl"></div>
                                        <div id="debuggercontainer" hidden>
                                            <strong><span id="debugger_text">Debugger</span></strong>
                                            <div id="debugger"></div>
                                        </div>
                                        <!-- <ul class="alt">
                                            
                                            <li>
                                                <div id="speech">
                                                    <strong><span id="speech_text">Text</span></strong>
                                                    <div><span id="speech_"></span></div>
                                                </div>
                                            </li>
                                            <li>
                                                <strong><span id="isl_text">Indian Sign Language</span></strong>
                                                <div id="isl"></div>
                                            </li>
                                            <li>
                                                <div id="debuggercontainer" hidden>
                                                    <strong><span id="debugger_text">Debugger</span></strong>
                                                    <div id="debugger"></div>
                                                </div>
                                            </li>
                                        </ul> -->
                                    </div>
                                </div>
                        
                                <!-- Right Column: Input Text and Comments -->
                                <div class="col-md-6 right-column1">
                                    <div class="content text-center">
                                        <!-- Input for text -->
                                        <div class="englishInput">
                                            <form method="POST" id='form'>
                                                <input id="text" type="text" name="text" autocomplete="off">
                                            </form><br>
                                            <button id="submit" style="background: transparent; border: none;">
                                                <i class="fa fa-sign-language" aria-hidden="true" style="font-size:36px"></i>
                                            </button>
                                        </div>
                                        <div class="curr_playing">
                                            Current Word
                                            <p class="curr_word_playing"></p>
                                        </div>
                                        <div class="islOutput">
                                            ISL text 
                                            <p id="isl_text"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>                        
                    </div>
                    </div>
                </div>
            </div>
        <!-- </div> -->
        <footer class="footer-container">
            <div class="left-col-text">
                <p>@SpeakSign App 2023 (Master Thesis Project).</p>
            </div>
            <div class="right-col-text">
                <p>by Ayush Goyal</p>
            </div>
        </footer>
            <script type="text/javascript" src="{{ url_for('static', filename='js/script.js') }}"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>